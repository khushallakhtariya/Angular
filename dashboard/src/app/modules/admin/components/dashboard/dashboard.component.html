<div class="flex h-screen bg-gray-100">
  <!-- Sidebar -->
  <nav
    class="bg-gray-800 text-white flex flex-col transition-all duration-300 ease-in-out"
    [class.w-64]="!collapsed"
    [class.w-20]="collapsed"
  >
    <!-- Collapse Button -->
    <div class="p-4 flex justify-end">
      <button (click)="toggleSidebar()" class="text-white focus:outline-none">
        <span
          class="material-symbols-outlined hover:text-blue-400 transition-all duration-200 cursor-pointer"
        >
          swap_horiz
        </span>
      </button>
    </div>

    <!-- Navigation -->
    <div class="flex-grow px-4 space-y-6">
      <div
        class="flex flex-col items-center transition-all duration-300 ease-in-out"
      >
        <!-- Dashboard Image -->
        <img
          src="https://images.pexels.com/photos/302769/pexels-photo-302769.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"
          alt="Dashboard Image"
          class="w-16 h-16 object-cover rounded-full mb-2 transform transition-all duration-300 ease-in-out"
          [ngClass]="{
            'opacity-0 scale-90': collapsed,
            'opacity-100 scale-100': !collapsed
          }"
        />

        <!-- Dashboard Title -->
        <div
          class="text-2xl font-bold transition-all duration-300 origin-left"
          [ngClass]="{
            'opacity-0 scale-90': collapsed,
            'opacity-100 scale-100': !collapsed
          }"
        >
          Dashboard
        </div>
      </div>

      <!-- Navigation Links -->
      <ul class="space-y-2">
        <li>
          <a
            routerLink="home"
            routerLinkActive="bg-gray-700 text-blue-400"
            class="flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-700 hover:text-blue-400 transition-all duration-200"
          >
            <span class="material-symbols-outlined">home</span>
            <span
              class="transition-all duration-300 origin-left"
              [ngClass]="{
                'opacity-0 scale-90': collapsed,
                'opacity-100 scale-100': !collapsed
              }"
            >
              Home
            </span>
          </a>
        </li>
        <li>
          <a
            routerLink="users"
            routerLinkActive="bg-gray-700 text-blue-400"
            class="flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-700 hover:text-blue-400 transition-all duration-200"
          >
            <span class="material-symbols-outlined">person</span>
            <span
              class="transition-all duration-300 origin-left"
              [ngClass]="{
                'opacity-0 scale-90': collapsed,
                'opacity-100 scale-100': !collapsed
              }"
            >
              Users
            </span>
          </a>
        </li>
        <li>
          <a
            routerLink="builder"
            routerLinkActive="bg-gray-700 text-blue-400"
            class="flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-700 hover:text-blue-400 transition-all duration-200"
          >
            <span class="material-symbols-outlined"> drag_handle </span>
            <span
              class="transition-all duration-300 origin-left"
              [ngClass]="{
                'opacity-0 scale-90': collapsed,
                'opacity-100 scale-100': !collapsed
              }"
            >
              Layout Builder
            </span>
          </a>
        </li>

        <li>
          <a
            routerLink="profile"
            routerLinkActive="bg-gray-700 text-blue-400"
            class="flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-700 hover:text-blue-400 transition-all duration-200"
          >
            <span class="material-symbols-outlined"> account_circle </span>
            <span
              class="transition-all duration-300 origin-left"
              [ngClass]="{
                'opacity-0 scale-90': collapsed,
                'opacity-100 scale-100': !collapsed
              }"
            >
              profile
            </span>
          </a>
        </li>

        <li class="relative">
          <!-- Main chats link -->
          <button
            (click)="chatsDropdownOpen = !chatsDropdownOpen"
            class="w-full text-left flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-700 hover:text-blue-400 transition-all duration-200"
            [ngClass]="{ 'bg-gray-700 text-blue-400': chatsDropdownOpen }"
          >
            <span class="material-symbols-outlined"> chat </span>
            <span
              class="transition-all duration-300 origin-left"
              [ngClass]="{
                'opacity-0 scale-90': collapsed,
                'opacity-100 scale-100': !collapsed
              }"
            >
              Chats
            </span>
            <span class="ml-auto material-symbols-outlined">
              {{ chatsDropdownOpen ? "expand_less" : "expand_more" }}
            </span>
          </button>

          <!-- Dropdown Menu -->
          <ul
            *ngIf="chatsDropdownOpen"
            class="mt-1 ml-6 space-y-1 bg-gray-800 rounded-lg p-2 shadow-lg transition-all duration-300"
            [ngClass]="{
              'opacity-0 scale-95': collapsed,
              'opacity-100 scale-100': !collapsed
            }"
          >
            <li>
              <a
                routerLink="chats/private"
                class="block px-4 py-2 rounded hover:bg-gray-700 hover:text-blue-400 transition"
              >
                Private Chats
              </a>
            </li>
            <li>
              <a
                routerLink="chats/group"
                class="block px-4 py-2 rounded hover:bg-gray-700 hover:text-blue-400 transition"
              >
                Group Chats
              </a>
            </li>
            <li>
              <a
                routerLink="chats/drawer"
                class="block px-4 py-2 rounded hover:bg-gray-700 hover:text-blue-400 transition"
              >
                Drawer Chats
              </a>
            </li>
          </ul>
        </li>

        <li class="relative">
          <!-- Dropdown Toggle Button -->
          <button
            class="flex items-center justify-between p-3 w-full rounded-lg hover:bg-gray-700 hover:text-blue-400 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50"
            (click)="toggleDropdown()"
          >
            <div class="flex items-center space-x-3">
              <span class="material-symbols-outlined text-gray-300">
                error
              </span>
              <span
                class="transition-all duration-300 origin-left text-gray-200"
                [ngClass]="{
                  'opacity-0 scale-90': collapsed,
                  'opacity-100 scale-100': !collapsed
                }"
              >
                Error Pages
              </span>
            </div>
            <span
              class="material-symbols-outlined text-gray-300 transition-transform duration-200"
              [ngClass]="{
                'rotate-180': collapsed
              }"
            >
              expand_more
            </span>
          </button>

          <!-- Dropdown Menu -->
          <ul
            *ngIf="dropdownOpen"
            class="absolute left-0 w-full mt-2 bg-gray-800 text-white rounded-lg shadow-lg z-50 border border-gray-700 overflow-hidden animate-fade-in"
          >
            <li>
              <a
                routerLink="error-404"
                routerLinkActive="bg-gray-700 text-blue-400"
                class="flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-700 transition-all duration-200 text-gray-300 hover:text-white"
              >
                <span class="material-symbols-outlined text-blue-400">
                  error
                </span>
                <span
                  class="transition-all duration-300 origin-left"
                  [ngClass]="{
                    'opacity-0 scale-90': collapsed,
                    'opacity-100 scale-100': !collapsed
                  }"
                >
                  Error 404
                </span>
              </a>
            </li>
            <li>
              <a
                routerLink="error-500"
                routerLinkActive="bg-gray-700 text-blue-400"
                class="flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-700 transition-all duration-200 text-gray-300 hover:text-white"
              >
                <span class="material-symbols-outlined text-yellow-400">
                  warning
                </span>
                <span
                  class="transition-all duration-300 origin-left"
                  [ngClass]="{
                    'opacity-0 scale-90': collapsed,
                    'opacity-100 scale-100': !collapsed
                  }"
                >
                  Error 500
                </span>
              </a>
            </li>
          </ul>
        </li>
      </ul>
    </div>

    <!-- Logout Button -->
    <div class="p-4 border-t border-gray-700">
      <button
        (click)="logout()"
        class="flex items-center space-x-3 w-full p-3 rounded-lg hover:bg-gray-700 hover:text-blue-400 transition-all duration-200"
      >
        <span class="material-symbols-outlined">logout</span>
        <span
          class="transition-all duration-300 origin-left"
          [ngClass]="{
            'opacity-0 scale-90': collapsed,
            'opacity-100 scale-100': !collapsed
          }"
        >
          Logout
        </span>
      </button>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="flex-1 overflow-auto p-2">
    <router-outlet></router-outlet>
  </main>
</div>
