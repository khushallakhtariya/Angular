<div class="p-6 bg-gray-50 min-h-screen">
  <!-- Header -->
  <div class="flex justify-between items-center mb-6">
    <h2 class="text-2xl font-bold text-gray-800">File Manager</h2>
    <div class="flex gap-2">
      <button
        class="flex items-center gap-2 px-4 py-2 rounded text-gray-700 border hover:bg-gray-100 transition"
      >
        <span class="material-symbols-outlined text-xl">create_new_folder</span>
        <span>New Folder</span>
      </button>
      <button
        class="flex items-center gap-2 px-4 py-2 rounded text-white bg-blue-600 hover:bg-blue-700 transition"
      >
        <span class="material-symbols-outlined text-xl">upload</span>
        <span>Upload</span>
      </button>
    </div>
  </div>

  <!-- Folders Section -->
  <h3 class="text-lg font-semibold text-gray-700 mb-4">Folders</h3>
  <div
    class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-8"
  >
    <ng-container *ngFor="let folder of folders">
      <div
      (click)="openSlider(folder)"
        class="p-4 bg-white border rounded-lg shadow-sm hover:shadow-md transition cursor-pointer flex items-center justify-between"
      >
        <div class="flex items-center gap-3">
          <div class="text-yellow-500 text-3xl">
            <span class="material-symbols-outlined">folder</span>
          </div>
          <div>
            <div class="font-semibold text-gray-800">{{ folder.name }}</div>
            <div class="text-sm text-gray-500">{{ folder.size }}</div>
          </div>
        </div>

        <!-- Dropdown -->
        <div
          class="relative inline-block text-left"
          (click)="$event.stopPropagation()"
        >
          <span
            class="material-symbols-outlined text-gray-400 hover:text-gray-600 cursor-pointer"
            (click)="toggleDropdown('folder-' + folder.name)"
          >
            more_vert
          </span>

          <div
            *ngIf="isDropdownOpen('folder-' + folder.name)"
            class="dropdown-menu bg-white shadow rounded mt-1 absolute right-0 w-40"
          >
            <ul class="py-1 text-sm text-gray-700">
              <button
                class="flex items-center px-4 py-2 w-full hover:bg-gray-100 cursor-pointer"
              >
                <span class="material-symbols-outlined mr-2 text-gray-500"
                  >folder_open</span
                >
                Open
              </button>
              <button
                class="flex items-center px-4 py-2 w-full hover:bg-gray-100 cursor-pointer"
              >
                <span class="material-symbols-outlined mr-2 text-gray-500"
                  >download</span
                >
                Download
              </button>
              <button
                class="flex items-center px-4 py-2 w-full hover:bg-gray-100 cursor-pointer"
              >
                <span class="material-symbols-outlined mr-2 text-gray-500"
                  >drive_file_rename_outline</span
                >
                Rename
              </button>
              <button
                (click)="deleteFolder(folder.name)"
                class="flex items-center px-4 py-2 w-full hover:bg-gray-100 cursor-pointer text-red-600"
              >
                <span class="material-symbols-outlined mr-2">delete</span>
                Delete
              </button>
              <button
                class="flex items-center px-4 py-2 w-full hover:bg-gray-100 cursor-pointer"
              >
                <span class="material-symbols-outlined mr-2 text-gray-500"
                  >share</span
                >
                Share
              </button>
            </ul>
          </div>
        </div>
      </div>
    </ng-container>
  </div>

  <!-- Files Section -->
  <h3 class="text-lg font-semibold text-gray-700 mb-4">Files</h3>
  <div
    class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"
  >
    <ng-container *ngFor="let file of files">
      <div
        (click)="openSlider(file)"
        class="p-4 bg-white border rounded-lg shadow-sm hover:shadow-md transition cursor-pointer flex items-center justify-between"
      >
        <div class="flex items-center gap-3">
          <div class="text-3xl" [ngClass]="file.iconColor">
            <span class="material-symbols-outlined">{{
              file.icon || "description"
            }}</span>
          </div>
          <div>
            <div class="font-semibold text-gray-800">{{ file.name }}</div>
            <div class="text-sm text-gray-500">{{ file.size }}</div>
          </div>
        </div>

        <!-- Dropdown -->
        <div
          class="relative inline-block text-left"
          (click)="$event.stopPropagation()"
        >
          <span
            class="material-symbols-outlined text-gray-400 hover:text-gray-600 cursor-pointer"
            (click)="toggleDropdown('file-' + file.name)"
          >
            more_vert
          </span>

          <div
            *ngIf="isDropdownOpen('file-' + file.name)"
            class="dropdown-menu bg-white shadow rounded mt-1 absolute right-0 w-40"
          >
            <ul class="py-1 text-sm text-gray-700">
              <button
                class="flex items-center px-4 py-2 w-full hover:bg-gray-100 cursor-pointer"
              >
                <span class="material-symbols-outlined mr-2 text-gray-500"
                  >download</span
                >
                Download
              </button>
              <button
                class="flex items-center px-4 py-2 w-full hover:bg-gray-100 cursor-pointer"
              >
                <span class="material-symbols-outlined mr-2 text-gray-500"
                  >drive_file_rename_outline</span
                >
                Rename
              </button>
              <button
                class="flex items-center px-4 py-2 w-full hover:bg-gray-100 cursor-pointer"
              >
                <span class="material-symbols-outlined mr-2 text-gray-500"
                  >share</span
                >
                Share
              </button>
              <button
                (click)="deleteFile(file.name)"
                class="flex items-center px-4 py-2 w-full hover:bg-gray-100 cursor-pointer text-red-600"
              >
                <span class="material-symbols-outlined mr-2">delete</span>
                Delete
              </button>
            </ul>
          </div>
        </div>
      </div>
    </ng-container>
  </div>
</div>

<!-- Slide-In Panel --><div
  class="fixed top-0 right-0 h-full w-90 bg-white border-l border-slate-300 shadow-2xl transform transition-transform duration-300 ease-in-out z-50"
  [ngClass]="{
    'translate-x-0': selectedItem,
    'translate-x-full': !selectedItem
  }"
>
  <div
    class="flex justify-between items-center p-6 border-b border-slate-300 bg-gradient-to-r from-indigo-600 via-indigo-700 to-indigo-800"
  >
    <h4 class="text-xl font-bold text-white tracking-wide drop-shadow-md select-none">
      Details
    </h4>
    <button
      (click)="closeSlider()"
      class="text-indigo-200 hover:text-white focus:outline-none focus:ring-2 focus:ring-indigo-400 rounded transition-colors duration-200"
      aria-label="Close details panel"
      title="Close"
    >
      <span class="material-symbols-outlined text-3xl select-none">close</span>
    </button>
  </div>

  <div class="p-8 space-y-10">
    <!-- Icon and Name -->
    <div class="flex items-center gap-7 border-b border-slate-300 pb-6">
      <span
        class="material-symbols-outlined text-8xl rounded-full p-6 bg-gradient-to-tr from-sky-300 to-indigo-500 text-white drop-shadow-lg"
        [ngClass]="selectedItem?.iconColor || 'text-white'"
        style="filter: drop-shadow(0 0 10px rgba(99, 102, 241, 0.7))"
      >
        {{ selectedItem?.icon || 'folder' }}
      </span>
      <div>
        <h3
          class="text-3xl font-extrabold text-slate-900 leading-tight tracking-wide select-text"
        >
          {{ selectedItem?.name || 'Unnamed Item' }}
        </h3>
        <p
          class="text-sm font-semibold text-indigo-600 uppercase tracking-widest"
        >
          {{ selectedItem?.icon === 'folder' ? 'Folder' : 'File' }}
        </p>
      </div>
    </div>

    <!-- Additional Info Grid -->
    <div
      class="grid grid-cols-2 gap-x-10 gap-y-8 text-slate-800 text-base font-medium"
    >
      <div
        class="p-4 rounded-lg bg-indigo-50 hover:bg-indigo-100 transition-colors duration-300 shadow-sm hover:shadow-md cursor-default select-none"
      >
        <span class="block font-semibold text-indigo-700 mb-2">Size</span>
        <span>{{ selectedItem?.size || 'Unknown' }}</span>
      </div>
      <div
        class="p-4 rounded-lg bg-indigo-50 hover:bg-indigo-100 transition-colors duration-300 shadow-sm hover:shadow-md cursor-default select-none"
      >
        <span class="block font-semibold text-indigo-700 mb-2">Created</span>
        <span>{{ selectedItem?.createdDate || 'N/A' }}</span>
      </div>
      <div
        class="p-4 rounded-lg bg-indigo-50 hover:bg-indigo-100 transition-colors duration-300 shadow-sm hover:shadow-md cursor-default select-none"
      >
        <span class="block font-semibold text-indigo-700 mb-2">Last Modified</span>
        <span>{{ selectedItem?.modifiedDate || 'N/A' }}</span>
      </div>
      <div
        class="p-4 rounded-lg bg-indigo-50 hover:bg-indigo-100 transition-colors duration-300 shadow-sm hover:shadow-md cursor-default select-none"
      >
        <span class="block font-semibold text-indigo-700 mb-2">Owner</span>
        <span>{{ selectedItem?.owner || 'Unknown' }}</span>
      </div>
    </div>

    <!-- Description -->
    <div
      *ngIf="selectedItem?.description"
      class="pt-6 border-t border-slate-300 text-slate-700"
    >
      <h4
        class="font-semibold text-xl mb-3 text-indigo-700 tracking-wide select-text"
      >
        Description
      </h4>
      <p class="text-base leading-relaxed select-text">
        {{ selectedItem?.description }}
      </p>
    </div>
  </div>
</div>
